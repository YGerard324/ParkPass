{
  "version": 3,
  "sources": ["../../src/expression-builders/where.ts"],
  "sourcesContent": ["import type {\n  WhereAttributeHashValue,\n  WhereOptions,\n} from '../abstract-dialect/where-sql-builder-types.js';\nimport { PojoWhere } from '../abstract-dialect/where-sql-builder.js';\nimport type { WhereOperators } from '../model.js';\nimport type { Op } from '../operators.js';\nimport type { Expression } from '../sequelize.js';\nimport { BaseSqlExpression } from './base-sql-expression.js';\n\n/**\n * Do not use me directly. Use {@link where}\n */\nexport class Where<Operator extends keyof WhereOperators = typeof Op.eq> extends BaseSqlExpression {\n  private declare readonly brand: 'where';\n\n  readonly where: PojoWhere | WhereOptions;\n\n  /**\n   * @example\n   * ```ts\n   * where({ id: 1 })\n   * ```\n   *\n   * @param whereOptions\n   */\n  constructor(whereOptions: WhereOptions);\n\n  /**\n   * @example\n   * ```ts\n   * where(col('id'), { [Op.eq]: 1 })\n   * ```\n   *\n   * @param leftOperand\n   * @param whereAttributeHashValue\n   */\n  constructor(leftOperand: Expression, whereAttributeHashValue: WhereAttributeHashValue<any>);\n\n  /**\n   * @example\n   * ```ts\n   * where(col('id'), Op.eq, 1)\n   * ```\n   *\n   * @param leftOperand\n   * @param operator\n   * @param rightOperand\n   */\n  constructor(leftOperand: Expression, operator: Operator, rightOperand: WhereOperators[Operator]);\n\n  constructor(\n    ...args:\n      | [whereOptions: WhereOptions]\n      | [leftOperand: Expression, whereAttributeHashValue: WhereAttributeHashValue<any>]\n      | [leftOperand: Expression, operator: Operator, rightOperand: WhereOperators[Operator]]\n  ) {\n    super();\n\n    if (args.length === 1) {\n      this.where = args[0];\n    } else if (args.length === 2) {\n      this.where = PojoWhere.create(args[0], args[1]);\n    } else {\n      if (typeof args[1] === 'string') {\n        throw new TypeError(`where(left, operator, right) does not accept a string as the operator. Use one of the operators available in the Op object.\nIf you wish to use custom operators not provided by Sequelize, you can use the \"sql\" template literal tag. Refer to the documentation on custom operators on https://sequelize.org/docs/v7/querying/operators/#custom-operators for more details.`);\n      }\n\n      // normalize where(col, op, val)\n      // to where(col, { [op]: val })\n      this.where = PojoWhere.create(args[0], { [args[1]]: args[2] });\n    }\n  }\n}\n\n/**\n * A way of writing an SQL binary operator, or more complex where conditions.\n *\n * This solution is slightly more verbose than the POJO syntax, but allows any value on the left hand side of the operator (unlike the POJO syntax which only accepts attribute names).\n * For instance, either the left or right hand side of the operator can be {@link fn}, {@link col}, {@link literal} etc.\n *\n * If your left operand is an attribute name, using the regular POJO syntax (`{ where: { attrName: value }}`) syntax is usually more convenient.\n *\n * \u26A0\uFE0F Unlike the POJO syntax, if the left operand is a string, it will be treated as a _value_, not an attribute name. If you wish to refer to an attribute, use {@link Attribute} instead.\n *\n * @example\n * ```ts\n * where(attribute('id'), { [Op.eq]: 1 });\n * where(attribute('id'), {\n *   [Op.or]: {\n *     [Op.eq]: 1,\n *     [Op.gt]: 10,\n *   },\n * });\n * ```\n *\n * @param leftOperand The left operand\n * @param whereAttributeHashValue The POJO containing the operators and the right operands\n */\nexport function where(\n  leftOperand: Expression,\n  whereAttributeHashValue: WhereAttributeHashValue<any>,\n): Where;\n/**\n * This version of `where` is used to opt back into the POJO syntax. Useful in combination with {@link sql}.\n *\n * @example\n * ```ts\n * sequelize.query(sql`\n *   SELECT * FROM users WHERE ${where({ id: 1 })};\n * `)\n * ```\n *\n * produces\n *\n * ```sql\n * SELECT * FROM users WHERE \"id\" = 1;\n * ```\n *\n * @param whereOptions\n */\nexport function where(whereOptions: WhereOptions): Where;\n/**\n * @example\n * ```ts\n * where(col('id'), Op.eq, 1)\n * ```\n *\n * @example\n * // Using a column name as the left operand.\n * // Equal to: WHERE first_name = 'Lily'\n * where(col('first_name'), Op.eq, 'Lily');\n *\n * @example\n * // Using a SQL function on the left operand.\n * // Equal to: WHERE LOWER(first_name) = 'lily'\n * where(fn('LOWER', col('first_name')), Op.eq, 'lily');\n *\n * @example\n * // Using raw SQL as the left operand.\n * // Equal to: WHERE 'Lily' = 'Lily'\n * where(literal(`'Lily'`), Op.eq, 'Lily');\n *\n * @param leftOperand The left operand\n * @param operator The operator to use (one of the different values available in the {@link Op} object)\n * @param rightOperand The right operand\n */\nexport function where(\n  leftOperand: Expression,\n  operator: keyof WhereOperators,\n  rightOperand: Expression,\n): Where;\nexport function where(\n  ...args:\n    | [whereOptions: WhereOptions]\n    | [leftOperand: Expression, whereAttributeHashValue: WhereAttributeHashValue<any>]\n    | [leftOperand: Expression, operator: keyof WhereOperators, rightOperand: Expression]\n): Where {\n  // @ts-expect-error -- they are the same type but this overload is internal\n  return new Where(...args);\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA,+BAA0B;AAI1B,iCAAkC;AAK3B,MAAM,cAAoE,6CAAkB;AAAA,EAGxF;AAAA,EAmCT,eACK,MAIH;AACA,UAAM;AAEN,QAAI,KAAK,WAAW,GAAG;AACrB,WAAK,QAAQ,KAAK,CAAC;AAAA,IACrB,WAAW,KAAK,WAAW,GAAG;AAC5B,WAAK,QAAQ,mCAAU,OAAO,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;AAAA,IAChD,OAAO;AACL,UAAI,OAAO,KAAK,CAAC,MAAM,UAAU;AAC/B,cAAM,IAAI,UAAU;AAAA,kPACsN;AAAA,MAC5O;AAIA,WAAK,QAAQ,mCAAU,OAAO,KAAK,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,EAAE,CAAC;AAAA,IAC/D;AAAA,EACF;AACF;AA+EO,SAAS,SACX,MAII;AAEP,SAAO,IAAI,MAAM,GAAG,IAAI;AAC1B;",
  "names": []
}
